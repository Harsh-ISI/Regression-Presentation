---
title: "Modeling Task 1 Report"
author: "Yash Gupta"
date: "`r format(Sys.Date(), '%B %d, %Y')`"
output:
  html_document:
    toc: false
    df_print: paged
    self_contained: true
    code_folding: hide    
  pdf_document:
    keep_tex: true
    toc: false
    fig_caption: true
    highlight: tango
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = ifelse(knitr::is_html_output(), TRUE, FALSE), 
  warning = FALSE, 
  message = FALSE,
  fig.align = "center",
  fig.width = 6,
  fig.height = 4
)
library(shiny)
library(dplyr)
library(lmtest)
library(ggplot2)
library(stargazer)
```

# **Introduction**
In the Modeling Task 1, I have been provided with U.S. Economical Quarterly Data (1950Q1 - 2000Q4) comprising of key macro-economical variables such as gdp, consumption, disposable personal income, unemployment rate etc. The primary goal was to verify if changes in peopleâ€™s income (DPI) and unemployment rates can explain changes in how much they spend (consumption). I have done the following tasks in the order as mentioned below :  

1. **Verification of the specified linear model and evaluation of model accuracy** 
2. **Outlier detection using Tukey's test**
3. **Impact analysis of doubling the dataset**
4. **Autocorrelation check using Durbin-Watson test**

# **Task 1: Verification of Specified Linear Model**

## **Model Specification**

The regression model is specified as:  
\[
\Delta \text{Consumption}_t = \alpha + \beta_1 \Delta \text{DPI}_t + \beta_2 \Delta \text{Unemp}_t + \epsilon_t
\]

## **Data Preparation**

First differences were calculated for:  
- Consumption ($\Delta \text{Consumption}_t = \text{Consumption}_t - \text{Consumption}_{t-1}$)  
- Disposable income ($\Delta \text{DPI}_t$)  
- Unemployment rate ($\Delta \text{Unemp}_t$)  

```{r data-prep}
df <- read.csv('data/ModelingTask1.csv', na.strings = 'NA')

df_diff <- df |>
  mutate(
    D_consumption = c(NA, diff(consumption)),
    D_dpi = c(NA, diff(dpi)),
    D_unemp = c(NA, diff(unemp))
  ) |>
  filter(!is.na(D_consumption))
```

Note : Only 1 row was removed due to differencing operation.

## **Results**

```{r task1}
model <- lm(D_consumption ~ D_dpi + D_unemp, data = df_diff)
summary_model <- summary(model)

knitr::kable(coef(summary_model), digits = 4,
             caption = "Linear Model Output (Task 1)")
```

--- 

## **Model Accuracy** 

Since model was build on the whole data and any testing data was not provided so I checked the accuracy metrics for regression on the training data itself. 

```{r accuracy, include=TRUE, echo = TRUE}
# Calculating R-squared, RMSE, MAE
rsq <- summary_model$r.squared
residuals <- residuals(model) 
rmse <- sqrt(mean(residuals^2))
mae <- mean(abs(residuals))
```

```{r ,echo = FALSE, include=TRUE}
cat("Accuracy Metrics:\n",
    "R-squared:", round(rsq, 3), "\n",
    "RMSE:", round(rmse, 2), "\n",
    "MAE:", round(mae, 2))


```


